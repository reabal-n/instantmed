{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rey/Desktop/instantmed/instantmed-main/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\"\nimport { cookies } from \"next/headers\"\n\n// Server client for use in Server Components, Route Handlers, and Server Actions\n// Always create a new client within each function - do not store in a global variable\nexport async function createClient() {\n  const cookieStore = await cookies()\n\n  return createServerClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll()\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options))\n        } catch {\n          // The \"setAll\" method was called from a Server Component.\n          // This can be ignored if you have middleware refreshing user sessions.\n        }\n      },\n    },\n  })\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAIO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,OAAO,IAAA,+LAAkB,sUAAoF;QAC3G,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,YAAY,GAAG,CAAC,MAAM,OAAO;gBAClF,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,uEAAuE;gBACzE;YACF;QACF;IACF;AACF"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///Users/rey/Desktop/instantmed/instantmed-main/app/actions/account.ts"],"sourcesContent":["\"use server\"\n\nimport { createClient } from \"@/lib/supabase/server\"\nimport { revalidatePath } from \"next/cache\"\n\nexport async function changePassword(\n  currentPassword: string,\n  newPassword: string,\n): Promise<{ success: boolean; error: string | null }> {\n  const supabase = await createClient()\n\n  // Get current user\n  const {\n    data: { user },\n    error: userError,\n  } = await supabase.auth.getUser()\n\n  if (userError || !user) {\n    return { success: false, error: \"Not authenticated\" }\n  }\n\n  // Verify current password by re-authenticating\n  const { error: signInError } = await supabase.auth.signInWithPassword({\n    email: user.email!,\n    password: currentPassword,\n  })\n\n  if (signInError) {\n    return { success: false, error: \"Current password is incorrect\" }\n  }\n\n  // Update password\n  const { error: updateError } = await supabase.auth.updateUser({\n    password: newPassword,\n  })\n\n  if (updateError) {\n    return { success: false, error: updateError.message }\n  }\n\n  return { success: true, error: null }\n}\n\nexport async function requestPasswordReset(email: string): Promise<{ success: boolean; error: string | null }> {\n  const supabase = await createClient()\n\n  const { error } = await supabase.auth.resetPasswordForEmail(email, {\n    redirectTo: `${process.env.NEXT_PUBLIC_SITE_URL}/auth/reset-password`,\n  })\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  return { success: true, error: null }\n}\n\nexport async function deleteAccount(): Promise<{ success: boolean; error: string | null }> {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n    error: userError,\n  } = await supabase.auth.getUser()\n\n  if (userError || !user) {\n    return { success: false, error: \"Not authenticated\" }\n  }\n\n  // Soft delete - mark profile as deleted\n  const { error: updateError } = await supabase\n    .from(\"profiles\")\n    .update({\n      full_name: \"Deleted User\",\n      phone: null,\n      address_line1: null,\n      suburb: null,\n      state: null,\n      postcode: null,\n      medicare_number: null,\n      medicare_irn: null,\n      medicare_expiry: null,\n    })\n    .eq(\"auth_user_id\", user.id)\n\n  if (updateError) {\n    return { success: false, error: updateError.message }\n  }\n\n  // Sign out the user\n  await supabase.auth.signOut()\n\n  revalidatePath(\"/\")\n  return { success: true, error: null }\n}\n\nexport async function updateNotificationPreferences(\n  emailNotifications: boolean,\n  smsNotifications: boolean,\n): Promise<{ success: boolean; error: string | null }> {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n    error: userError,\n  } = await supabase.auth.getUser()\n\n  if (userError || !user) {\n    return { success: false, error: \"Not authenticated\" }\n  }\n\n  const { error } = await supabase\n    .from(\"profiles\")\n    .update({\n      email_notifications: emailNotifications,\n      sms_notifications: smsNotifications,\n    })\n    .eq(\"auth_user_id\", user.id)\n\n  if (error) {\n    return { success: false, error: error.message }\n  }\n\n  revalidatePath(\"/patient/settings\")\n  return { success: true, error: null }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///Users/rey/Desktop/instantmed/instantmed-main/.next-internal/server/app/auth/forgot-password/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {requestPasswordReset as '40ed82d4821823db5eba8f0fb94021db6ee74e1bc9'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}